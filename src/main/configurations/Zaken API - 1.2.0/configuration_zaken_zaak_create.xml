<Module 
	xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
	xsi:noNamespaceSchemaLocation="../FrankConfig.xsd"
	>
	<Adapter 
		name="zaak_create"
		
		>
		<Receiver name="zaak_create">
			<ApiListener 
				name="zaak_create" 
				method="POST"
				uriPattern="/zaken/api/v1/zaken"
				produces="JSON"
				consumes="JSON"
				/>
		</Receiver>
		<Pipeline>
			<Exits>
				<Exit name="EXIT" state="SUCCESS" code="200"/>
				<Exit name="NotModified" state="SUCCESS" code="304"/>
				<Exit name="BadRequest" state="ERROR" code="400"/>
				<Exit name="NotAuthorized" state="ERROR" code="401" empty="true"/>
				<Exit name="NotAllowed" state="ERROR" code="403" empty="true"/>
				<Exit name="PreconditionFailed" state="ERROR" code="412"/>
				<Exit name="ServerError" state="ERROR" code="500"/>
				<Exit name="Timeout" state="ERROR" code="504"/>
			</Exits>

			<SenderPipe name="ProxySender">
				<HttpSender
						name="HttpProxySender"
						methodType="GET"
						headersParams="Authorization,Accept-Crs"
						url="${zaakbrug.openzaak.embedded.zaken-api.root-url}/zaken/api/v1/zaken{$sessionKeyName}"
						resultStatusCodeSessionKey="ResultCode"
				/>
				<Param name="Accept-Crs" value="EPSG:4326"/>
				<Param name="Authorization" value="Bearer jwt"/>
				<Forward name="success" path="returnResultCode" />
				<Forward name="exception" path="returnResultCode" />
			</SenderPipe>

			<EchoPipe name="returnResultCode" getInputFromSessionKey="ResultCode" />

		</Pipeline>
	</Adapter>
</Module>